<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>数据分析理论与Python实战</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../https://assets.qiufei.site/personal/profile.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-681fbf911679f9b3dbf9743eb275ba49.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7e49aeac8059a213a463aa1a739e8272.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io"> 
<span class="menu-text">首页</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide"> 
<span class="menu-text">课件</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">数据分析理论与Python实战</h1>
<p class="subtitle lead">第三章 数据预处理</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="目录" class="level2">
<h2 class="anchored" data-anchor-id="目录">目录 🧭</h2>
<p>我们将围绕以下四个方面展开：</p>
<ol type="1">
<li><strong>了解数据</strong>：数据的分类、特征以及如何描述数据。</li>
<li><strong>数据质量评估</strong>：评估数据的完整性、一致性、准确性和及时性。</li>
<li><strong>数据清洗</strong>：处理缺失值、噪声、不一致和异常数据。</li>
<li><strong>特征工程</strong>：从原始数据中提取有用的特征。</li>
</ol>
</section>
<section id="了解数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据">了解数据 🔎</h2>
<p>首先，深入了解数据。我们需要知道数据有哪些类型，以及如何描述数据的特征。这就像认识一个新朋友 🧑‍🤝‍🧑，要了解他的基本信息和性格特点。😊</p>
</section>
<section id="了解数据---数据的分类" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据的分类">了解数据 - 数据的分类 📊</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[数据 📦] --&gt; B(定量数据 🔢)
    A --&gt; C(定性数据 🔤)
    B --&gt; D(离散变量 🎲)
    B --&gt; E(连续变量 📏)
    C --&gt; F(定序变量 🥇🥈🥉)
    C --&gt; G(名义变量 ♂️♀️)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="了解数据---数据的分类-续" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据的分类-续">了解数据 - 数据的分类 (续)</h2>
<p><strong>数据 (Data)</strong> 📦 是我们进行分析的基础。就像建筑师需要了解不同类型的建筑材料🧱、木材🪵、钢筋🔩一样，数据分析师也需要了解不同类型的数据。</p>
<p>在数据分析中，我们通常将数据分为两大类：<strong>定量数据</strong>和<strong>定性数据</strong>。</p>
</section>
<section id="了解数据---定量数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---定量数据">了解数据 - 定量数据 🔢</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[数据 📦] --&gt; B(定量数据 🔢)
    B --&gt; D(离散变量 🎲)
    B --&gt; E(连续变量 📏)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>可以测量，用数字表示。</li>
<li>就像测量身高📏和体重⚖️一样，可以得到具体的数值。</li>
<li>可参与数学运算，如计算平均值、标准差等。</li>
</ul>
</section>
<section id="了解数据---定量数据细分" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---定量数据细分">了解数据 - 定量数据：细分</h2>
<p><strong>定量数据</strong>又可以分为两种：</p>
<ul>
<li><strong>离散变量 (Discrete Variable)</strong> 🎲</li>
<li><strong>连续变量 (Continuous Variable)</strong> 📏</li>
</ul>
</section>
<section id="了解数据---离散变量" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散变量">了解数据 - 离散变量 🎲</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    B(定量数据 🔢) --&gt; D(离散变量 🎲)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>取值有限或可数，通常是整数。</li>
<li>就像掷骰子🎲，结果只能是1、2、3、4、5、6。</li>
<li>例如：客户数量、产品数量。</li>
<li><strong>举例</strong>：商店一天卖出的苹果数量🍎可能是10个、25个，但不会是10.5个。</li>
</ul>
</section>
<section id="了解数据---连续变量" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---连续变量">了解数据 - 连续变量 📏</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    B(定量数据 🔢) --&gt; E(连续变量 📏)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>取值可以是区间内的任意值，通常带小数点。</li>
<li>就像测量身高📏，可以精确到毫米。</li>
<li>例如：身高、体重、温度。</li>
<li><strong>举例</strong>：身高🧍可能是1.75米，体重可能是68.5公斤。</li>
</ul>
</section>
<section id="了解数据---定性数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---定性数据">了解数据 - 定性数据 🔤</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[数据 📦] --&gt; C(定性数据 🔤)
    C --&gt; F(定序变量 🥇🥈🥉)
    C --&gt; G(名义变量 ♂️♀️)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>描述性质或类别，通常用文字表示。</li>
<li>就像描述性格😎或爱好🎨。</li>
<li>通常不能直接参与数学运算。</li>
</ul>
</section>
<section id="了解数据---定性数据细分" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---定性数据细分">了解数据 - 定性数据：细分</h2>
<p><strong>定性数据</strong>也可以分为两种：</p>
<ul>
<li><strong>定序变量 (Ordinal Variable)</strong> 🥇🥈🥉</li>
<li><strong>名义变量 (Nominal Variable)</strong> ♂️♀️</li>
</ul>
</section>
<section id="了解数据---定序变量" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---定序变量">了解数据 - 定序变量 🥇🥈🥉</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    C(定性数据 🔤) --&gt; F(定序变量 🥇🥈🥉)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>类别间有顺序关系，但不能进行数值运算。</li>
<li>例如：教育程度、满意度。</li>
<li><strong>举例</strong>：比赛奖牌🏅有金牌、银牌、铜牌，有等级顺序，但不能说金牌比银牌“好多少”。</li>
</ul>
</section>
<section id="了解数据---名义变量" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---名义变量">了解数据 - 名义变量 ♂️♀️</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    C(定性数据 🔤) --&gt; G(名义变量 ♂️♀️)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>类别间无顺序关系，也不能进行数值运算。</li>
<li>就像性别🚹🚺，只有类别之分，没有等级。</li>
<li>例如：性别、颜色、血型。</li>
<li><strong>举例</strong>：性别🚹🚺有男和女，没有等级或顺序关系。</li>
</ul>
</section>
<section id="了解数据---数据分类总结" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据分类总结">了解数据 - 数据分类：总结 📝</h2>
<p>理解数据的分类有助于我们选择合适的分析方法。就像选择合适的工具🛠️来修理不同的东西一样。</p>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 43%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>数据类型</th>
<th>子类型</th>
<th>特点</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>定量数据 🔢</td>
<td>离散变量 🎲</td>
<td>取值有限或可数，通常为整数</td>
<td>客户数量、产品数量</td>
</tr>
<tr class="even">
<td></td>
<td>连续变量 📏</td>
<td>取值可为区间内任意值，通常带小数点</td>
<td>身高、体重、收入</td>
</tr>
<tr class="odd">
<td>定性数据 🔤</td>
<td>定序变量 🥇🥈🥉</td>
<td>类别间有顺序关系，但不能进行数值运算</td>
<td>教育程度、满意度</td>
</tr>
<tr class="even">
<td></td>
<td>名义变量 ♂️♀️</td>
<td>类别间无顺序关系，也不能进行数值运算</td>
<td>性别、颜色、血型</td>
</tr>
</tbody>
</table>
</section>
<section id="了解数据---数据的特征" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据的特征">了解数据 - 数据的特征 🌟</h2>
<p>了解数据的分类后，我们再来看看如何描述数据的特征。就像描述一个人的外貌🧔和性格😎一样。</p>
<p>首先是<strong>集中趋势</strong>，描述数据集中在哪个位置。就像射箭🎯，看箭是否集中在靶心🎯。常用测度有均值、中位数和众数。</p>
</section>
<section id="了解数据---数据的特征集中趋势---定性数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据的特征集中趋势---定性数据">了解数据 - 数据的特征：集中趋势 - 定性数据📊</h2>
<p>对于定性数据：</p>
<ul>
<li>均值、中位数通常无意义。</li>
<li>定序变量：中位数和众数能反映一定含义。</li>
<li>名义变量：仅众数有意义，但不能代表该特征占多数。</li>
<li>名义变量中的二分变量：若取值合适，均值可解释。</li>
</ul>
</section>
<section id="了解数据---集中趋势均值" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势均值">了解数据 - 集中趋势：均值 ➕➖</h2>
<p><strong>均值 (Mean)</strong>：</p>
<ul>
<li>所有数据值的总和除以数据个数。</li>
<li>就像求平均分。</li>
<li>公式： <span class="math display">\[
\bar{x} = \frac{\sum_{i=1}^{n} x_i}{n}
\]</span></li>
<li><strong>优点</strong>：易计算，考虑所有值。</li>
<li><strong>缺点</strong>：易受极端值影响。</li>
</ul>
</section>
<section id="了解数据---集中趋势中位数" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势中位数">了解数据 - 集中趋势：中位数 🧍</h2>
<p><strong>中位数 (Median)</strong>：</p>
<ul>
<li>数据按大小排序后，位于中间位置的数值。</li>
<li>就像按身高排队🧍🧍🧍，中间人的身高。</li>
<li>若数据个数为偶数，则为中间两个值的平均值。</li>
<li><strong>优点</strong>：不受极端值影响。</li>
<li><strong>缺点</strong>：不能反映所有数据值信息。</li>
</ul>
</section>
<section id="了解数据---集中趋势众数" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势众数">了解数据 - 集中趋势：众数 🙋</h2>
<p><strong>众数 (Mode)</strong>：</p>
<ul>
<li>数据中出现次数最多的数值。</li>
<li>就像投票🗳️，得票最多的选项。</li>
<li><strong>优点</strong>：不受极端值影响，适用所有类型。</li>
<li><strong>缺点</strong>：可能多众数或无众数，不能反映所有值信息。</li>
</ul>
</section>
<section id="了解数据---集中趋势总结" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势总结">了解数据 - 集中趋势：总结 📝</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 24%">
<col style="width: 14%">
<col style="width: 23%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>测度</th>
<th>定义</th>
<th>适用数据类型</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>均值</td>
<td>总和除以个数</td>
<td>定量数据</td>
<td>易计算，考虑所有值</td>
<td>易受极端值影响</td>
</tr>
<tr class="even">
<td>中位数</td>
<td>排序后中间值</td>
<td>定量、定序</td>
<td>不受极端值影响</td>
<td>不能反映所有值信息</td>
</tr>
<tr class="odd">
<td>众数</td>
<td>出现次数最多值</td>
<td>定量、定序、名义</td>
<td>不受极端值影响，适用所有类型</td>
<td>可能多众数或无众数，不能反映所有值信息</td>
</tr>
</tbody>
</table>
</section>
<section id="了解数据---集中趋势举例" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势举例">了解数据 - 集中趋势：举例 🍎</h2>
<p><strong>举例：</strong></p>
<p>一组学生成绩：70, 75, 80, 85, 90, 95, 100</p>
<ul>
<li><strong>均值</strong>：85</li>
<li><strong>中位数</strong>：85</li>
<li><strong>众数</strong>：无</li>
</ul>
</section>
<section id="了解数据---集中趋势举例-续" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势举例-续">了解数据 - 集中趋势：举例 (续) 🍎</h2>
<p>若一个学生成绩为500：</p>
<ul>
<li><strong>均值</strong>：142.14 (受极端值影响)</li>
<li><strong>中位数</strong>：85 (不受影响)</li>
<li><strong>众数</strong>：无</li>
</ul>
</section>
<section id="了解数据---集中趋势定性数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---集中趋势定性数据">了解数据 - 集中趋势：定性数据 🔤</h2>
<p><strong>定性数据的集中趋势</strong>：</p>
<ul>
<li>均值、中位数通常无意义。</li>
<li>众数可反映出现次数最多的类别。
<ul>
<li><strong>举例</strong>：头发颜色调查，众数为“黑色”，则黑发最多。</li>
</ul></li>
<li>不同数据类型适用不同集中趋势测度。</li>
</ul>
</section>
<section id="了解数据---离散程度" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度">了解数据 - 离散程度 📏</h2>
<p>除了集中趋势，还需要了解<strong>离散程度</strong>，描述数据间的差异。就像测量身高差异🚶🧍🚶‍♀️，是悬殊还是接近。</p>
<p>常见测度：极差、方差、标准差、四分位距、平均差和变异系数。</p>
</section>
<section id="了解数据---离散程度定量与定性数据" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度定量与定性数据">了解数据 - 离散程度：定量与定性数据</h2>
<ul>
<li><strong>定量数据</strong>：
<ul>
<li>极差：数据范围大小。</li>
<li>方差、标准差、平均差：数据相对均值偏离。</li>
<li>变异系数：标准差除以均值，修正度量单位影响。</li>
</ul></li>
<li><strong>定性数据</strong>：
<ul>
<li>极差：取值类别，含义有限。</li>
<li>其他测度对定性数据（尤其名义变量）意义不大。</li>
</ul></li>
</ul>
</section>
<section id="了解数据---离散程度极差" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度极差">了解数据 - 离散程度：极差 ↔︎️</h2>
<p><strong>极差 (Range)</strong>：</p>
<ul>
<li>最大值与最小值之差。</li>
<li>就像测量班级最高和最矮同学的身高差。</li>
<li>公式：<code>Range = Max - Min</code></li>
<li><strong>优点</strong>：计算简单。</li>
<li><strong>缺点</strong>：易受极端值影响，不能反映分布。</li>
</ul>
</section>
<section id="了解数据---离散程度方差" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度方差">了解数据 - 离散程度：方差 📐</h2>
<p><strong>方差 (Variance)</strong>：</p>
<ul>
<li>每个值与均值之差的平方的平均值。</li>
<li>衡量数据偏离均值的程度。</li>
<li>公式： <span class="math display">\[
Var(X) = \frac{\sum_{i=1}^{n} (x_i - \bar{x})^2}{n}
\]</span></li>
<li><strong>优点</strong>：考虑所有值，反映离散程度。</li>
<li><strong>缺点</strong>：单位是数据单位平方，不易解释。</li>
</ul>
</section>
<section id="了解数据---离散程度标准差" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度标准差">了解数据 - 离散程度：标准差 📏</h2>
<p><strong>标准差 (Standard Deviation)</strong>：</p>
<ul>
<li>方差的平方根。</li>
<li>衡量偏离均值程度，与数据单位相同。</li>
<li>公式： <span class="math display">\[
SD(X) = \sqrt{Var(X)}
\]</span></li>
<li><strong>优点</strong>：考虑所有值，单位与数据相同，易解释。</li>
<li><strong>缺点</strong>：计算比极差复杂。</li>
</ul>
</section>
<section id="了解数据---离散程度四分位距" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度四分位距">了解数据 - 离散程度：四分位距 📦</h2>
<p><strong>四分位距 (IQR)</strong>：</p>
<ul>
<li>上四分位数(Q3)与下四分位数(Q1)之差。</li>
<li>衡量中间50%数据的离散程度。</li>
<li>公式：<code>IQR = Q3 - Q1</code></li>
<li><strong>优点</strong>：不受极端值影响。</li>
<li><strong>缺点</strong>：不能反映所有值信息。</li>
</ul>
</section>
<section id="了解数据---离散程度平均差" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度平均差">了解数据 - 离散程度：平均差 ➖</h2>
<p><strong>平均差 (MAD)</strong>：</p>
<ul>
<li>每个值与均值之差的绝对值的平均值。</li>
<li>衡量数据偏离均值的平均距离。</li>
<li>公式： <span class="math display">\[
MAD = \frac{\sum_{i=1}^{n} |x_i - \bar{x}|}{n}
\]</span></li>
<li><strong>优点</strong>：考虑所有值，反映离散程度。</li>
<li><strong>缺点</strong>：计算相对复杂。</li>
</ul>
</section>
<section id="了解数据---离散程度变异系数" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离散程度变异系数">了解数据 - 离散程度：变异系数 ➗</h2>
<p><strong>变异系数 (CV)</strong>：</p>
<ul>
<li>标准差除以均值。</li>
<li>衡量相对离散程度，无量纲。</li>
<li>公式： <span class="math display">\[
CV = \frac{SD(X)}{\bar{x}}
\]</span></li>
<li><strong>优点</strong>：无量纲，可比较不同数据集离散。
<ul>
<li><strong>举例</strong>：比较身高和体重离散程度。</li>
</ul></li>
<li><strong>缺点</strong>：均值接近0时可能很大，失去意义。</li>
</ul>
</section>
<section id="离散程度总结" class="level2">
<h2 class="anchored" data-anchor-id="离散程度总结">离散程度：总结 📝</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 31%">
<col style="width: 28%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>指标</th>
<th>定义</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>极差</td>
<td>最大值与最小值之差</td>
<td>计算简单</td>
<td>易受极端值影响，不能反映分布</td>
</tr>
<tr class="even">
<td>方差</td>
<td>值与均值之差的平方的平均值</td>
<td>考虑所有值，反映离散</td>
<td>单位平方，不易解释</td>
</tr>
<tr class="odd">
<td>标准差</td>
<td>方差平方根</td>
<td>考虑所有值，单位与数据相同，易解释</td>
<td>计算较复杂</td>
</tr>
<tr class="even">
<td>四分位距</td>
<td>Q3与Q1之差</td>
<td>不受极端值影响</td>
<td>不能反映所有值信息</td>
</tr>
<tr class="odd">
<td>平均差</td>
<td>值与均值之差的绝对值的平均值</td>
<td>考虑所有值，反映离散</td>
<td>计算较复杂</td>
</tr>
<tr class="even">
<td>变异系数</td>
<td>标准差除以均值</td>
<td>无量纲，可比较不同数据集</td>
<td>均值接近0时可能很大，失去意义</td>
</tr>
</tbody>
</table>
</section>
<section id="离散程度总结-续" class="level2">
<h2 class="anchored" data-anchor-id="离散程度总结-续">离散程度：总结 (续) 🍎</h2>
<p>两组数据：</p>
<ul>
<li>A: 1, 2, 3, 4, 5</li>
<li>B: 1, 1, 3, 5, 5</li>
</ul>
<p>均值都为3，但离散程度不同：</p>
<ul>
<li>A: 极差=4, 方差=2, 标准差≈1.41, IQR=3, MAD=1.2, CV≈0.47</li>
<li>B: 极差=4, 方差=3.2, 标准差≈1.79, IQR=4, MAD=1.6, CV≈0.60</li>
</ul>
<p>B组离散程度更大。</p>
</section>
<section id="了解数据---相关性" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关性">了解数据 - 相关性 🤝</h2>
<p>测量<strong>相关性</strong>，了解变量变化是否相关。就像研究朋友关系🧑‍🤝‍🧑，看是否经常一起玩耍🤹。</p>
</section>
<section id="了解数据---相关性方法" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关性方法">了解数据 - 相关性：方法</h2>
<ul>
<li><strong>相关性测量</strong> 🤝
<ul>
<li><strong>可视化</strong>：折线图📈、散点图，探索关系。
<ul>
<li><strong>举例</strong>：气温🌡️和冰淇淋销量🍦。</li>
</ul></li>
<li><strong>协方差</strong>：确定关系正负，无强度信息，受单位影响。</li>
<li><strong>相关系数</strong>：不受单位影响，理论上限±1，完全线性相关。
<ul>
<li><strong>举例</strong>：身高🧍和体重⚖️。</li>
</ul></li>
<li><strong>回归分析</strong>：一元或多元。
<ul>
<li><strong>举例</strong>：广告投入💰预测销售额📈。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="了解数据---协方差" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---协方差">了解数据 - 协方差 ➗✖️</h2>
<p><strong>协方差 (Covariance)</strong>：</p>
<ul>
<li>衡量两变量总体误差。趋势一致为正，相反为负，独立为0。</li>
<li>公式： <span class="math display">\[
Cov(X, Y) = \frac{\sum_{i=1}^{n} (x_i - \bar{x})(y_i - \bar{y})}{n}
\]</span></li>
<li><strong>优点</strong>：判断趋势是否一致。</li>
<li><strong>缺点</strong>：受单位影响，不能反映强度。</li>
</ul>
</section>
<section id="了解数据---相关系数" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关系数">了解数据 - 相关系数 📏</h2>
<p><strong>相关系数 (Correlation Coefficient)</strong>：</p>
<ul>
<li>衡量线性相关程度，[-1, 1]。</li>
<li>公式 (Pearson)： <span class="math display">\[
r = \frac{Cov(X, Y)}{SD(X) \cdot SD(Y)}
\]</span></li>
<li><strong>优点</strong>：不受单位影响，反映强度，范围固定。</li>
<li><strong>解释</strong>：
<ul>
<li>r = 1：完全正相关。</li>
<li>r = -1：完全负相关。</li>
<li>r = 0：不相关。</li>
<li>|r|越大，相关性越强。</li>
</ul></li>
</ul>
</section>
<section id="了解数据---相关系数举例" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关系数举例">了解数据 - 相关系数：举例</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">相关系数</th>
<th style="text-align: left;">解释</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0.9</td>
<td style="text-align: left;">强正相关</td>
</tr>
<tr class="even">
<td style="text-align: center;">0.5</td>
<td style="text-align: left;">中等正相关</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">弱正相关</td>
</tr>
<tr class="even">
<td style="text-align: center;">0</td>
<td style="text-align: left;">不相关</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-0.1</td>
<td style="text-align: left;">弱负相关</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.5</td>
<td style="text-align: left;">中等负相关</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-0.9</td>
<td style="text-align: left;">强负相关</td>
</tr>
</tbody>
</table>
</section>
<section id="了解数据---相关性可视化" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关性可视化">了解数据 - 相关性可视化 📊</h2>
<div id="cell-fig-correlation-plot-1" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成模拟数据</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.rand(<span class="dv">50</span>) <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> x <span class="op">+</span> <span class="dv">1</span> <span class="op">+</span> np.random.randn(<span class="dv">50</span>) <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制散点图</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"变量 X"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"变量 Y"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"相关性可视化"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-correlation-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="一个散点图，显示两个变量正相关。">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-correlation-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter3_files/figure-html/fig-correlation-plot-1-output-1.png" alt="一个散点图，显示两个变量正相关。" width="659" height="523" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-correlation-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: 相关性可视化示例
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="了解数据---相关性可视化-续" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---相关性可视化-续">了解数据 - 相关性可视化 (续)</h2>
<p><strong>相关性可视化</strong>:</p>
<ul>
<li>散点图直观展示关系。</li>
<li>点呈现趋势 (如倾斜) 则可能相关。</li>
<li>点杂乱无章则可能不相关。</li>
</ul>
</section>
<section id="了解数据---数据缺失" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---数据缺失">了解数据 - 数据缺失 ❓</h2>
<p>真实数据常有<strong>数据缺失</strong>。像书📚缺页。需了解原因和类型，以便处理。</p>
<ul>
<li><strong>数据缺失 (Missing Data)</strong> ❓
<ul>
<li>不含缺失值的变量称完全变量，含缺失值称不完全变量。</li>
<li>原因：
<ul>
<li>遗漏：采集故障、存储故障、人为因素等。
<ul>
<li><strong>举例</strong>：传感器故障📡。</li>
</ul></li>
<li>属性不存在。
<ul>
<li><strong>举例</strong>：未填婚姻状况💑。</li>
</ul></li>
<li>信息忽略。
<ul>
<li><strong>举例</strong>：认为“昵称”👻不重要。</li>
</ul></li>
</ul></li>
</ul></li>
<li><strong>举例</strong>：
<ul>
<li>收入缺失 💸</li>
<li>参数缺失 ⚙️</li>
<li>未答问题 📝</li>
</ul></li>
</ul>
</section>
<section id="了解数据---缺失原因" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---缺失原因">了解数据 - 缺失原因</h2>
<p><strong>数据缺失的原因</strong>：</p>
<ul>
<li><strong>数据遗漏</strong>：
<ul>
<li>设备故障：传感器📡、硬盘💽。</li>
<li>网络问题：中断🔗、丢包。</li>
<li>人为因素：录入错误⌨️、忘填。</li>
</ul></li>
<li><strong>属性不存在</strong>：
<ul>
<li>对象本身不具备。
<ul>
<li><strong>举例</strong>：未婚无配偶。</li>
</ul></li>
</ul></li>
<li><strong>信息被忽略</strong>：
<ul>
<li>采集者认为不重要。</li>
<li>用户不愿提供。</li>
</ul></li>
</ul>
</section>
<section id="了解数据---噪声" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---噪声">了解数据 - 噪声 📢</h2>
<p><strong>噪声</strong>是数据中随机误差或偏差。像照片噪点，影响清晰度。需识别处理，减少影响。</p>
<ul>
<li><strong>噪声 (Noise)</strong> 📢
<ul>
<li>观测变量的随机误差或方差。</li>
<li><code>观测量 = 真实数据 + 噪声</code></li>
</ul></li>
<li><strong>举例</strong>：
<ul>
<li>测量误差 📏</li>
<li>录入错误 ⌨️</li>
<li>随机干扰 ⚡</li>
</ul></li>
</ul>
</section>
<section id="了解数据---噪声来源" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---噪声来源">了解数据 - 噪声来源</h2>
<p><strong>噪声的来源</strong>：</p>
<ul>
<li><strong>测量误差</strong>：
<ul>
<li>仪器精度限制。</li>
<li>环境干扰。</li>
<li>人为操作误差。</li>
</ul></li>
<li><strong>采集错误</strong>：
<ul>
<li>录入错误。</li>
<li>传输错误。</li>
</ul></li>
<li><strong>随机因素</strong>：
<ul>
<li>自然波动。</li>
<li>无法预测干扰。</li>
</ul></li>
</ul>
</section>
<section id="了解数据---离群点" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离群点">了解数据 - 离群点 🦄</h2>
<p><strong>离群点</strong>是明显不同的数据点。像羊群🐑中独角兽🦄。需识别处理，避免误导。</p>
<ul>
<li><strong>离群点 (Outlier)</strong> 🦄
<ul>
<li>与一般行为或模型不一致的数据。</li>
</ul></li>
<li><strong>举例</strong>：
<ul>
<li>欺诈交易 💳</li>
<li>异常天气 🌪️</li>
<li>疾病爆发 🤒</li>
</ul></li>
</ul>
</section>
<section id="了解数据---离群点原因" class="level2">
<h2 class="anchored" data-anchor-id="了解数据---离群点原因">了解数据 - 离群点原因</h2>
<p><strong>离群点的原因</strong>：</p>
<ul>
<li><strong>数据错误</strong>：
<ul>
<li>录入错误。</li>
<li>测量错误。</li>
</ul></li>
<li><strong>异常事件</strong>：
<ul>
<li>罕见现象。</li>
<li>突发事件。</li>
</ul></li>
<li><strong>真实变异</strong>：
<ul>
<li>个体差异。
<ul>
<li><strong>举例</strong>：篮球运动员身高。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="数据质量" class="level2">
<h2 class="anchored" data-anchor-id="数据质量">数据质量 💯</h2>
<p>预处理前，评估<strong>数据质量</strong>。像做菜🧑‍🍳前检查食材🥬🥕🥩。质量影响结果可靠性。</p>
</section>
<section id="数据质量四要素" class="level2">
<h2 class="anchored" data-anchor-id="数据质量四要素">数据质量：四要素</h2>
<ul>
<li>数据分析结果有效性和准确性的前提。💪</li>
<li>四要素：
<ul>
<li><strong>完整性 (Completeness)</strong></li>
<li><strong>一致性 (Consistency)</strong></li>
<li><strong>准确性 (Accuracy)</strong></li>
<li><strong>及时性 (Timeliness)</strong></li>
</ul></li>
</ul>
</section>
<section id="数据质量---完整性" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---完整性">数据质量 - 完整性 💯</h2>
<p><strong>完整性 (Completeness)</strong> 💯</p>
<ul>
<li>数据信息是否缺失。可能是记录缺失，也可能是字段缺失。
<ul>
<li><strong>举例</strong>: 记录缺失像漏掉家庭👨‍👩‍👧‍👦信息；字段缺失像漏填必填项。</li>
</ul></li>
<li>不完整数据价值降低，是基础评估标准。像书📚缺页。</li>
</ul>
</section>
<section id="数据质量---完整性检查" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---完整性检查">数据质量 - 完整性：检查</h2>
<ul>
<li>统计记录数和唯一值个数。
<ul>
<li>日志访问量突降需检查。</li>
<li>地区统计缺失需检查。</li>
</ul></li>
<li>统计空值(NULL)个数。
<ul>
<li><strong>举例</strong>: Python <code>pandas</code>：</li>
</ul></li>
</ul>
<div id="code-check-missing-1" class="cell" data-code-caption="检查缺失值" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建含缺失值的DataFrame</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'Name'</span>: [<span class="st">'Alice'</span>, <span class="st">'Bob'</span>, <span class="st">'Charlie'</span>, <span class="va">None</span>],</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Age'</span>: [<span class="dv">25</span>, np.nan, <span class="dv">30</span>, <span class="dv">40</span>],</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'City'</span>: [<span class="st">'NY'</span>, <span class="st">'London'</span>, np.nan, <span class="st">'Tokyo'</span>]}</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 检查缺失值</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.isnull().<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Name    1
Age     1
City    1
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="数据质量---完整性评估" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---完整性评估">数据质量 - 完整性：评估</h2>
<p><strong>如何评估完整性</strong>：</p>
<ul>
<li><strong>计算缺失值比例</strong>：
<ul>
<li>缺失值数量 / 总数据量。</li>
</ul></li>
<li><strong>检查关键字段是否缺失</strong>：
<ul>
<li><strong>举例</strong>：客户ID、订单号。</li>
</ul></li>
<li><strong>可视化缺失值</strong>：
<ul>
<li>热力图、条形图等。
<ul>
<li>Python <code>missingno</code>库：</li>
</ul></li>
</ul></li>
</ul>
<div id="code-visualize-missing-1" class="cell" data-code-caption="可视化缺失值" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> missingno <span class="im">as</span> msno</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 创建含缺失值的DataFrame</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'Name'</span>: [<span class="st">'Alice'</span>, <span class="st">'Bob'</span>, <span class="st">'Charlie'</span>, <span class="va">None</span>],</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Age'</span>: [<span class="dv">25</span>, np.nan, <span class="dv">30</span>, <span class="dv">40</span>],</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'City'</span>: [<span class="st">'NY'</span>, <span class="st">'London'</span>, np.nan, <span class="st">'Tokyo'</span>]}</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 可视化缺失值</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>msno.matrix(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="数据质量---一致性" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---一致性">数据质量 - 一致性 🔄</h2>
<p><strong>一致性 (Consistency)</strong> 🔄</p>
<ul>
<li>数据是否合乎规范，集合内数据是否统一格式。</li>
</ul>
</section>
<section id="数据质量---一致性体现" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---一致性体现">数据质量 - 一致性：体现</h2>
<ul>
<li>主要体现在记录规范和是否符合逻辑。
<ul>
<li><strong>规范</strong>：编码、格式，如手机号13位数字，IP地址格式。
<ul>
<li><strong>举例</strong>: 身份证、日期格式。</li>
</ul></li>
<li><strong>逻辑</strong>：数据间关系，如PV≥UV，跳出率0-1间。
<ul>
<li><strong>举例</strong>: 年龄非负，身高不超3米。</li>
</ul></li>
</ul></li>
<li>一致性审核重要且复杂。像检查产品📦📦📦是否符合规格。</li>
</ul>
</section>
<section id="数据质量---一致性举例" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---一致性举例">数据质量 - 一致性：举例</h2>
<ul>
<li><strong>举例</strong>:
<ul>
<li><strong>日期格式</strong>：
<ul>
<li>2023-10-26</li>
<li>10/26/2023</li>
</ul></li>
<li><strong>单位</strong>：
<ul>
<li>温度：℃, ℉</li>
<li>长度：m, ft</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="数据质量---一致性举例-续" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---一致性举例-续">数据质量 - 一致性：举例 (续)</h2>
<ul>
<li><strong>编码</strong>：
<ul>
<li>性别：“男/女”, “M/F”, “1/0”</li>
<li>地区：“北京”, “北京市”</li>
</ul></li>
<li><strong>逻辑矛盾</strong>：
<ul>
<li>下单时间晚于发货。</li>
<li>年龄大于150。</li>
</ul></li>
</ul>
</section>
<section id="数据质量---一致性检查" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---一致性检查">数据质量 - 一致性：检查</h2>
<ul>
<li><strong>检查</strong>：
<ul>
<li><strong>定义规范</strong>：格式、编码、范围等。</li>
<li><strong>数据剖析</strong>：工具或脚本检查格式、分布等。</li>
<li><strong>校验规则</strong>：编写规则检查关系。</li>
</ul></li>
</ul>
</section>
<section id="数据质量---准确性" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性">数据质量 - 准确性 ✅</h2>
<p><strong>准确性 (Accuracy)</strong> ✅</p>
<ul>
<li>数据记录信息是否异常或错误。</li>
<li>关注数据中的错误。</li>
</ul>
</section>
<section id="数据质量---准确性错误" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性错误">数据质量 - 准确性：错误</h2>
<ul>
<li>关注错误，例如：
<ul>
<li>乱码。
<ul>
<li><strong>举例</strong>: 中文变“锟斤拷”�。</li>
</ul></li>
<li>异常值，不符有效性。
<ul>
<li><strong>举例</strong>: 年龄-5，身高10米。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="数据质量---准确性数据集" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性数据集">数据质量 - 准确性：数据集</h2>
<ul>
<li>可能存在于个别记录，也可能存在于整个数据集。
<ul>
<li>字段错误，如数量级错误，易发现。</li>
<li>个别异常值，用最大值、最小值、箱线图审核。</li>
</ul></li>
</ul>
</section>
<section id="数据质量---准确性举例" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性举例">数据质量 - 准确性：举例</h2>
<ul>
<li><strong>举例</strong>：
<ul>
<li><strong>拼写错误</strong>：“北京”写成“背景”。</li>
<li><strong>数值错误</strong>：“100”写成“1000”。</li>
<li><strong>单位错误</strong>：“米”写成“厘米”。</li>
<li><strong>乱码</strong>：文本显示为无法识别字符。</li>
</ul></li>
</ul>
</section>
<section id="数据质量---准确性检查" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性检查">数据质量 - 准确性：检查</h2>
<ul>
<li><strong>检查</strong>：
<ul>
<li><strong>可视化</strong>：散点图、直方图、箱线图。</li>
<li><strong>统计分析</strong>：均值、中位数、标准差。</li>
<li><strong>业务规则校验</strong>：检查是否符合常识。</li>
<li><strong>数据比对</strong>：与可靠来源比对。</li>
</ul></li>
</ul>
</section>
<section id="数据质量---准确性箱线图" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性箱线图">数据质量 - 准确性：箱线图 📦</h2>
<div id="cell-fig-boxplot-1" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成模拟数据</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.concatenate([np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">950</span>), </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                       np.random.normal(<span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">50</span>)])</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 绘制箱线图</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.boxplot(data, showmeans<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"数据"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"值"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"箱线图"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 20540 (\N{CJK UNIFIED IDEOGRAPH-503C}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)
/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 31665 (\N{CJK UNIFIED IDEOGRAPH-7BB1}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)
/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 32447 (\N{CJK UNIFIED IDEOGRAPH-7EBF}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)
/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 22270 (\N{CJK UNIFIED IDEOGRAPH-56FE}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)
/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 25968 (\N{CJK UNIFIED IDEOGRAPH-6570}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)
/home/runner/.local/lib/python3.12/site-packages/IPython/core/pylabtools.py:170: UserWarning: Glyph 25454 (\N{CJK UNIFIED IDEOGRAPH-636E}) missing from font(s) DejaVu Sans.
  fig.canvas.print_figure(bytes_io, **kw)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div id="fig-boxplot-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="箱线图，显示数据分布和异常值。">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter3_files/figure-html/fig-boxplot-1-output-2.png" alt="箱线图，显示数据分布和异常值。" width="662" height="523" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: 箱线图示例
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="数据质量---准确性箱线图-续" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---准确性箱线图-续">数据质量 - 准确性：箱线图 (续)</h2>
<p>箱线图：</p>
<ul>
<li><strong>箱体</strong>：中间50%数据。</li>
<li><strong>中位数</strong>：箱体中间线。</li>
<li><strong>上下边缘</strong>：Q3和Q1。</li>
<li><strong>触须</strong>：延伸至1.5倍IQR。</li>
<li><strong>异常值</strong>：超出触须点。</li>
</ul>
</section>
<section id="数据质量---及时性" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---及时性">数据质量 - 及时性 ⏱️</h2>
<p><strong>及时性 (Timeliness)</strong> ⏱️</p>
<ul>
<li>数据产生到可查看的间隔，即延时。
<ul>
<li><strong>举例</strong>: 股票行情、天气预报。</li>
</ul></li>
<li>数据分析周期加建立时间过长，结论失去意义。像新闻📰时效性。</li>
</ul>
</section>
<section id="数据质量---及时性重要性" class="level2">
<h2 class="anchored" data-anchor-id="数据质量---及时性重要性">数据质量 - 及时性：重要性</h2>
<p><strong>重要性</strong>：</p>
<ul>
<li><strong>实时决策</strong>：需据最新数据快速决策。
<ul>
<li><strong>举例</strong>：股票交易、自动驾驶。</li>
</ul></li>
<li><strong>趋势分析</strong>：过时数据无法反映当前。
<ul>
<li><strong>举例</strong>：去年数据分析明年销售。</li>
</ul></li>
<li><strong>数据价值</strong>：随时间推移，价值降低。</li>
</ul>
</section>
<section id="数据清洗" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗">数据清洗 🧼</h2>
<p><strong>数据清洗</strong>是预处理重要环节，解决质量问题。像做菜🧑‍🍳前洗食材。</p>
<p>目的是处理缺失值、噪声、不一致、异常数据，使数据符合标准。</p>
</section>
<section id="数据清洗内容" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗内容">数据清洗：内容</h2>
<ul>
<li>缺失值处理</li>
<li>噪声数据处理</li>
<li>不一致数据处理</li>
<li>异常数据处理</li>
</ul>
</section>
<section id="数据清洗---缺失值" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值">数据清洗 - 缺失值 ❓</h2>
<p><strong>缺失值</strong>，可忽略或填补。选择取决于比例和特点。像修衣服👕，洞大则扔，小则补。</p>
</section>
<section id="数据清洗---缺失值方法" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值方法">数据清洗 - 缺失值：方法</h2>
<ul>
<li>方法：
<ul>
<li><strong>忽略 (Deletion)</strong>：简单，但可能损失数据。像扔苹果🍎。</li>
<li><strong>填补 (Imputation)</strong>：填固定值、均值，或据记录填充。像替苹果🍎。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值忽略" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值忽略">数据清洗 - 缺失值：忽略</h2>
<p><strong>忽略 (Deletion)</strong>：</p>
<ul>
<li><strong>方法</strong>：
<ul>
<li>删含缺失值记录 (行)。</li>
<li>删缺失过多属性 (列)。</li>
</ul></li>
<li><strong>优点</strong>：简单。</li>
<li><strong>缺点</strong>：
<ul>
<li>可能损失数据。</li>
<li>可能偏差。
<ul>
<li><strong>举例</strong>：缺失值集中某群体，删数据致结果偏。</li>
</ul></li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>缺失值比例低。</li>
<li>缺失值不重要。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值填补" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值填补">数据清洗 - 缺失值：填补</h2>
<p><strong>填补 (Imputation)</strong>：</p>
<ul>
<li><strong>方法</strong>：
<ul>
<li><strong>固定值</strong>：0、-1、“未知”。</li>
<li><strong>统计值</strong>：均值、中位数、众数。</li>
<li><strong>模型预测</strong>：回归、决策树。</li>
<li><strong>最近邻</strong>：用相似记录值填充。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>保留记录。</li>
<li>减少损失。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>填补值可能不准。</li>
<li>可能偏差。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>缺失值比例高。</li>
<li>缺失值重要。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值固定值" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值固定值">数据清洗 - 缺失值：固定值</h2>
<p><strong>固定值填补</strong>：</p>
<ul>
<li><strong>举例</strong>：
<ul>
<li>数值型：0或-1。</li>
<li>类别型：“未知”、“佚名”、“N/A”。</li>
</ul></li>
<li><strong>优点</strong>：简单。</li>
<li><strong>缺点</strong>：
<ul>
<li>单一，不符实际。</li>
<li>可能偏差。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>含义明确，可用固定值替代。
<ul>
<li><strong>举例</strong>：“是否已婚”，缺失值用0表未婚。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值统计值" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值统计值">数据清洗 - 缺失值：统计值</h2>
<p><strong>统计值填补</strong>：</p>
<ul>
<li><strong>举例</strong>：
<ul>
<li>数值型：均值、中位数、众数。</li>
<li>类别型：众数。</li>
</ul></li>
<li><strong>优点</strong>：利用已有信息。</li>
<li><strong>缺点</strong>：
<ul>
<li>易受极端值影响 (均值)。</li>
<li>可能掩盖分布。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>数值型，分布均匀 (均值)。</li>
<li>数值型，分布偏斜 (中位数)。</li>
<li>类别型 (众数)。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值模型预测" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值模型预测">数据清洗 - 缺失值：模型预测</h2>
<p><strong>模型预测填补</strong>：</p>
<ul>
<li><strong>举例</strong>：
<ul>
<li>回归、决策树、随机森林。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>利用关系，填补值更接近真实。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>计算复杂。</li>
<li>需选模型。</li>
<li>可能过拟合。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>与其他变量有强关系。</li>
<li>有合适模型。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---缺失值对比" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值对比">数据清洗 - 缺失值：对比 📝</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 28%">
<col style="width: 30%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>方法</th>
<th>优点</th>
<th>缺点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>忽略</td>
<td>简单</td>
<td>可能损失数据，偏差</td>
<td>比例低，不重要</td>
</tr>
<tr class="even">
<td>填补</td>
<td>保留记录，减少损失</td>
<td>可能不准，偏差</td>
<td>比例高，重要</td>
</tr>
<tr class="odd">
<td>固定值</td>
<td>简单</td>
<td>单一，不符实际</td>
<td>含义明确，可固定值替代</td>
</tr>
<tr class="even">
<td>统计值</td>
<td>利用已有信息</td>
<td>易受极端影响，掩盖分布</td>
<td>数值型，分布均匀(均值)；偏斜(中位数)；类别型(众数)</td>
</tr>
<tr class="odd">
<td>模型预测</td>
<td>利用关系，更接近真实</td>
<td>计算复杂，需选模型，可能过拟合</td>
<td>与其他变量强关系，有模型</td>
</tr>
</tbody>
</table>
</section>
<section id="数据清洗---缺失值举例" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值举例">数据清洗 - 缺失值：举例</h2>
<p><strong>举例：</strong></p>
<p>“年龄”列有缺失值。</p>
<ul>
<li><strong>忽略</strong>：删年龄缺失记录。</li>
<li><strong>固定值</strong>：用0或-1填充。</li>
<li><strong>统计值</strong>：用已知年龄均值填充。</li>
<li><strong>模型预测</strong>：据职业、收入等</li>
</ul>
</section>
<section id="数据清洗---缺失值处理模型预测续" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---缺失值处理模型预测续">数据清洗 - 缺失值处理：模型预测（续）</h2>
<p><strong>模型预测填补</strong>：</p>
<ul>
<li><strong>举例</strong>：
<ul>
<li>根据用户的其他信息（如职业、收入等），建立一个模型来预测缺失的年龄。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---噪声数据处理" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声数据处理">数据清洗 - 噪声数据处理 🔊</h2>
<p>对于<strong>噪声数据</strong>，我们可以使用分箱、聚类或回归等方法进行处理。就像去除照片上的噪点📸一样，让照片更清晰。</p>
</section>
<section id="数据清洗---噪声数据处理方法" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声数据处理方法">数据清洗 - 噪声数据处理：方法</h2>
<ul>
<li><strong>分箱 (Binning)</strong> 🗑️
<ul>
<li>通过考察相邻数据来确定最终值，实现平滑。按属性值划分子区间，放入“箱子”。箱深表记录数，宽表范围。</li>
<li><strong>举例</strong>: 年龄分段：0-10、11-20、21-30岁等。</li>
</ul></li>
<li><strong>聚类 (Clustering)</strong> 🧩
<ul>
<li>数据分组为簇。找出并清除簇外值 (孤立点)。</li>
<li><strong>举例</strong>: 客户按消费习惯分群，找出“异常客户”。</li>
</ul></li>
<li><strong>回归 (Regression)</strong> 📈
<ul>
<li>发现变量关系，寻找映射，平滑数据。预测数值，包括线性回归和非线性回归。</li>
<li><strong>举例</strong>: 用面积、位置预测房价。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---噪声分箱" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声分箱">数据清洗 - 噪声：分箱 🗑️</h2>
<p><strong>分箱 (Binning)</strong>：</p>
<ul>
<li><strong>方法</strong>：
<ul>
<li>数据按属性值划分区间 (箱子)。</li>
<li>用代表值 (均值、中位数、边界值等) 替代箱内值。</li>
</ul></li>
<li><strong>类型</strong>：
<ul>
<li><strong>等宽</strong>：宽度相同。</li>
<li><strong>等频</strong>：数据量相同。</li>
<li><strong>自定义</strong>：据需求定边界。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>简单。</li>
<li>平滑，降噪。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>需确定数量和宽度。</li>
<li>可能损失细节。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>数据量大。</li>
<li>噪声为小幅波动。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---噪声聚类" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声聚类">数据清洗 - 噪声：聚类 🧩</h2>
<p><strong>聚类 (Clustering)</strong>：</p>
<ul>
<li><strong>方法</strong>：
<ul>
<li>数据划分簇，簇内相似度高，簇间低。</li>
<li>远离中心点视为噪声或离群点。</li>
</ul></li>
<li><strong>算法</strong>：
<ul>
<li>K-Means</li>
<li>DBSCAN</li>
<li>层次聚类</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>自动识别离群点。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>需选算法和参数。</li>
<li>计算量可能大。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>明显类别结构。</li>
<li>噪声为离群点。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---噪声回归" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声回归">数据清洗 - 噪声：回归 📈</h2>
<p><strong>回归 (Regression)</strong>：</p>
<ul>
<li><strong>方法</strong>：
<ul>
<li>建立模型，用其他变量预测目标变量。</li>
<li>用预测值代替原始值，平滑数据。</li>
</ul></li>
<li><strong>模型</strong>：
<ul>
<li>线性回归</li>
<li>多项式回归</li>
<li>支持向量回归</li>
<li>决策树回归</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>利用关系，平滑预测。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>需选模型。</li>
<li>可能过拟合或欠拟合。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>明显趋势或模式。</li>
<li>噪声为随机误差。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---噪声对比" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---噪声对比">数据清洗 - 噪声：对比 📝</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 28%">
<col style="width: 27%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>方法</th>
<th>优点</th>
<th>缺点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>分箱</td>
<td>简单，平滑，降噪</td>
<td>需定数量宽度，可能损失细节</td>
<td>数据量大，噪声小幅波动</td>
</tr>
<tr class="even">
<td>聚类</td>
<td>自动识别离群点</td>
<td>需选算法参数，计算量可能大</td>
<td>明显类别结构，噪声为离群点</td>
</tr>
<tr class="odd">
<td>回归</td>
<td>利用关系，平滑预测</td>
<td>需选模型，可能过拟合或欠拟合</td>
<td>明显趋势模式，噪声为随机误差</td>
</tr>
</tbody>
</table>
</section>
<section id="数据清洗---不一致数据" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---不一致数据">数据清洗 - 不一致数据 🔄</h2>
<p><strong>不一致数据</strong>，据情况处理，可能需人工干预或工具。像整理房间🧹，放东西到正确位置。</p>
</section>
<section id="数据清洗---不一致数据处理" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---不一致数据处理">数据清洗 - 不一致数据：处理</h2>
<ul>
<li>据实际情况定方案。</li>
<li>人工修复，知识工程工具修改。
<ul>
<li><strong>举例</strong>: “性别”列有“男/女”和“M/F”，统一。</li>
</ul></li>
<li>多源集成，编码差异，需转化。
<ul>
<li><strong>举例</strong>: 两库“日期”格式不同，统一。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---不一致数据方法-续" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---不一致数据方法-续">数据清洗 - 不一致数据：方法 (续)</h2>
<p><strong>处理方法</strong>：</p>
<ul>
<li><strong>标准化</strong>：
<ul>
<li>统一格式、编码、单位。
<ul>
<li><strong>举例</strong>：日期统一为“YYYY-MM-DD”。</li>
</ul></li>
</ul></li>
<li><strong>转换</strong>：
<ul>
<li>转换为统一表示。
<ul>
<li><strong>举例</strong>：“男/女”和“M/F”转“1/0”。</li>
</ul></li>
</ul></li>
<li><strong>合并</strong>：
<ul>
<li>多源数据合并为统一集。
<ul>
<li><strong>举例</strong>：不同部门客户数据合并。</li>
</ul></li>
</ul></li>
<li><strong>人工校验</strong>：
<ul>
<li>无法自动处理，需人工检查修正。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---异常数据" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---异常数据">数据清洗 - 异常数据 💥🩹</h2>
<p><strong>异常数据</strong>，判断是否可还原。不可还原则过滤；可还原尝试修复。像修电器🔌，有些可修，有些不可。</p>
</section>
<section id="数据清洗---异常数据类型" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---异常数据类型">数据清洗 - 异常数据：类型</h2>
<ul>
<li><strong>不可还原 (Irrecoverable)</strong> 💥
<ul>
<li>难修正，如乱码，字符截断，异常值。无规律则过滤。像碎花瓶💐。</li>
</ul></li>
<li><strong>可还原 (Recoverable)</strong> 🩹
<ul>
<li>参杂无用字符，用取子串、<code>trim()</code>去空格。
<ul>
<li><strong>举例</strong>: ” Hello World “去空格。</li>
</ul></li>
<li>字符截断，可推导则还原。
<ul>
<li><strong>举例</strong>: 用户名“Alexan”，推断“Alexander”。</li>
</ul></li>
<li>数值单位差异，转化处理。
<ul>
<li><strong>举例</strong>: 重量“克”和“千克”统一。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="数据清洗---异常不可还原" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---异常不可还原">数据清洗 - 异常：不可还原</h2>
<p><strong>不可还原异常</strong>：</p>
<ul>
<li><strong>特点</strong>：无法恢复到原始正确状态。</li>
<li><strong>举例</strong>：
<ul>
<li>乱码：编码错误致无法识别。</li>
<li>严重丢失：关键信息缺失。</li>
<li>完全错误：与真实不符。</li>
</ul></li>
<li><strong>处理</strong>：
<ul>
<li><strong>过滤</strong>：直接删除。</li>
</ul></li>
</ul>
</section>
<section id="数据清洗---异常可还原" class="level2">
<h2 class="anchored" data-anchor-id="数据清洗---异常可还原">数据清洗 - 异常：可还原</h2>
<p><strong>可还原异常</strong>：</p>
<ul>
<li><strong>特点</strong>：可恢复到原始正确状态。</li>
<li><strong>举例</strong>：
<ul>
<li><strong>字符串</strong>：
<ul>
<li>多余空格、特殊字符：<code>trim()</code>、正则。</li>
<li>截断：可推断则恢复。</li>
</ul></li>
<li><strong>数值</strong>：
<ul>
<li>单位错误：转换。</li>
<li>数量级错误：乘除常数。</li>
</ul></li>
</ul></li>
<li><strong>处理</strong>：
<ul>
<li>据情况选方法修复。</li>
</ul></li>
</ul>
</section>
<section id="特征工程" class="level2">
<h2 class="anchored" data-anchor-id="特征工程">特征工程 ⚙️</h2>
<p><strong>特征工程</strong>是预处理最后和重要环节。提取有用特征，提高性能。像厨师👨‍🍳切食材🔪，方便烹饪。</p>
</section>
<section id="特征工程作用" class="level2">
<h2 class="anchored" data-anchor-id="特征工程作用">特征工程：作用</h2>
<ul>
<li>原始数据维数高，清洗后成原始特征，但不都有用，有些需处理，有些干扰。像木材🪵，有些直接用，有些加工，有些不能用。</li>
<li>利用知识处理数据创建特征，供后续分析。目的：尽量少特征描述数据，保持特性。像木材加工家具🪑🛏️🛋️。
<ul>
<li>特征选择 (Feature Selection)</li>
<li>特征构建 (Feature Construction)</li>
<li>特征提取 (Feature Extraction)</li>
</ul></li>
</ul>
</section>
<section id="特征工程---特征选择" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征选择">特征工程 - 特征选择 🎯</h2>
<p><strong>特征选择</strong>是从原始特征中选对分析最有用的。像选演员🎭，选最适合角色的。</p>
</section>
<section id="特征工程---特征选择原则" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征选择原则">特征工程 - 特征选择：原则</h2>
<ul>
<li><strong>原则</strong> 🎯
<ul>
<li><strong>是否发散</strong>：不发散，方差近0，无区分作用。像身高🧍都一样。</li>
<li><strong>是否相关</strong>：取值能改变结果。相关性高优先。像预测房价🏠，面积、位置比颜色重要。</li>
<li><strong>信息是否冗余</strong>：本质相同，相关性高。像“年龄”和“出生年”。</li>
</ul></li>
</ul>
</section>
<section id="特征工程---特征选择重要性" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征选择重要性">特征工程 - 特征选择：重要性</h2>
<p><strong>重要性</strong>：</p>
<ul>
<li><strong>提高性能</strong>：选相关特征提准确性和泛化。</li>
<li><strong>降低成本</strong>：减少数量降训练预测时间和资源。</li>
<li><strong>增强可解释性</strong>：更少特征使模型易理解。</li>
</ul>
</section>
<section id="特征工程---特征选择方法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征选择方法">特征工程 - 特征选择：方法 🧰</h2>
<p><strong>方法</strong>多，据情况选。像选交通工具🚗✈️🚄，据距离、时间、预算。</p>
</section>
<section id="特征工程---特征选择方法-续" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征选择方法-续">特征工程 - 特征选择：方法 (续)</h2>
<ul>
<li><strong>方法</strong> 🧰
<ul>
<li><strong>Filter (过滤)</strong>：按发散性或相关性评分，设阈值或个数，选择。
<ul>
<li><strong>举例</strong>: 算方差，选大于阈值。</li>
</ul></li>
<li><strong>Wrapper (包装)</strong>：据目标函数，每次选或排除若干。
<ul>
<li><strong>举例</strong>: 递归特征消除 (RFE)，逐步减，直到最佳。</li>
</ul></li>
<li><strong>Embedded (集成)</strong>：训练算法模型，得权值，据系数选。类似Filter，但通过训练定优劣。
<ul>
<li><strong>举例</strong>: LASSO回归，L1正则化使系数变0，选择。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="特征工程---选择过滤法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---选择过滤法">特征工程 - 选择：过滤法</h2>
<p><strong>过滤法 (Filter)</strong>：</p>
<ul>
<li><strong>原理</strong>：据特性 (方差、相关系数、互信息等) 评估重要性，排序或筛选。</li>
<li><strong>指标</strong>：
<ul>
<li><strong>方差</strong>：离散程度。</li>
<li><strong>相关系数</strong>：线性相关。</li>
<li><strong>卡方检验</strong>：类别型特征与目标相关性。</li>
<li><strong>互信息</strong>：非线性相关。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>计算简单，快。</li>
<li>不需训练。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>忽略关系。</li>
<li>可能选冗余。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>维度高，需快速筛选。</li>
</ul></li>
</ul>
</section>
<section id="特征工程---选择包装法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---选择包装法">特征工程 - 选择：包装法</h2>
<p><strong>包装法 (Wrapper)</strong>：</p>
<ul>
<li><strong>原理</strong>：看作搜索，通过组合训练模型，评估性能，选最佳子集。</li>
<li><strong>方法</strong>：
<ul>
<li><strong>递归特征消除 (RFE)</strong>：逐步减，直到最佳。</li>
<li><strong>前向选择</strong>：逐步加，直到不提升。</li>
<li><strong>后向消除</strong>：逐步减，直到不下降。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>针对目标函数优化，效果好。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>计算量大。</li>
<li>易过拟合。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>维度不高。</li>
<li>性能要求高。</li>
</ul></li>
</ul>
</section>
<section id="特征工程---选择集成法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---选择集成法">特征工程 - 选择：集成法</h2>
<p><strong>集成法 (Embedded)</strong>：</p>
<ul>
<li><strong>原理</strong>：嵌入模型训练，通过学习自动选择。</li>
<li><strong>方法</strong>：
<ul>
<li><strong>LASSO回归</strong>：L1正则化使系数变0，选择。</li>
<li><strong>决策树</strong>：据信息增益或基尼系数选分裂。</li>
<li><strong>随机森林</strong>：评估重要性，排序。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>结合过滤和包装，考虑关系，利用模型，效果好。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>需训练，计算量可能大。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>维度高。</li>
<li>性能要求高。</li>
</ul></li>
</ul>
</section>
<section id="特征选择对比" class="level2">
<h2 class="anchored" data-anchor-id="特征选择对比">特征选择：对比 📝</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>方法</th>
<th>优点</th>
<th>缺点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>过滤法</td>
<td>计算简单，快，不需训练</td>
<td>忽略关系，可能选冗余</td>
<td>维度高，需快速筛选</td>
</tr>
<tr class="even">
<td>包装法</td>
<td>针对目标函数优化，效果好</td>
<td>计算量大，易过拟合</td>
<td>维度不高，性能要求高</td>
</tr>
<tr class="odd">
<td>集成法</td>
<td>结合过滤和包装，考虑关系，利用模型，效果好</td>
<td>需训练，计算量可能大</td>
<td>维度高，性能要求高</td>
</tr>
</tbody>
</table>
</section>
<section id="特征工程---特征构建" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征构建">特征工程 - 特征构建 🧱</h2>
<p><strong>特征构建</strong>是据知识，人工构造新特征。需理解数据和业务。像厨师👨‍🍳据食材特点，创菜肴🍽️。</p>
</section>
<section id="特征工程---特征构建作用" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征构建作用">特征工程 - 特征构建：作用</h2>
<ul>
<li>从原始特征中人工构建。像积木🧱搭城堡🏰，用已有积木创新形状。</li>
<li>需洞察力和分析力，从数据中找物理意义特征。</li>
<li>表格数据，可用混合或组合属性创建，或分解切分原有特征。
<ul>
<li><strong>举例</strong>：
<ul>
<li><strong>混合</strong>：“年”和“月”合并“年月”。</li>
<li><strong>组合</strong>：“身高”和“体重”组合“BMI”。</li>
<li><strong>分解</strong>：“日期”分解“年”、“月”、“日”、“星期”。</li>
<li><strong>切分</strong>：“年龄”切分“儿童”、“青年”、“中年”、“老年”。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="特征工程---构建方法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---构建方法">特征工程 - 构建：方法</h2>
<p><strong>方法</strong>：</p>
<ul>
<li><strong>组合</strong>：多特征组合。
<ul>
<li><strong>举例</strong>：BMI = 体重(kg) / 身高(m)^2</li>
</ul></li>
<li><strong>多项式</strong>：乘方、开方、相乘等。
<ul>
<li><strong>举例</strong>：x1, x2 -&gt; x1^2, x2^2, x1*x2</li>
</ul></li>
<li><strong>比率</strong>：相关特征相除。
<ul>
<li><strong>举例</strong>：每公里油耗 = 耗油 / 里程</li>
</ul></li>
<li><strong>类别编码</strong>：类别型转数值型。
<ul>
<li><strong>举例</strong>：One-Hot, Label Encoding</li>
</ul></li>
<li><strong>时间处理</strong>：提取年、月、日等。</li>
<li><strong>文本处理</strong>：提取关键词、主题等。
<ul>
<li><strong>举例</strong>：TF-IDF, Word Embeddings</li>
</ul></li>
<li><strong>领域知识</strong>：据知识设计。</li>
</ul>
</section>
<section id="特征工程---特征提取" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征提取">特征工程 - 特征提取 ✨</h2>
<p><strong>特征提取</strong>是算法自动生成新特征。用于降维和提取潜在结构。像照片📸转素描✏️，提取主要特征。</p>
</section>
<section id="特征工程---特征提取方法" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---特征提取方法">特征工程 - 特征提取：方法</h2>
<ul>
<li>自动构建新特征，将原始特征转为更具物理意义、统计意义或核的特征。方法包括PCA、ICA和LDA。
<ul>
<li><strong>PCA</strong>：坐标轴转换，寻最优子空间，降维、去相关。
<ul>
<li><strong>举例</strong>：1000维人脸图像降100维，保留特征。</li>
</ul></li>
<li><strong>ICA</strong>：PCA提不相关，ICA获独立属性。
<ul>
<li><strong>举例</strong>：混合音频分离独立声源 (人声、乐器)。</li>
</ul></li>
<li><strong>LDA</strong>：投影到低维，使同类点接近，异类点远离。
<ul>
<li><strong>举例</strong>：文档映射低维，同主题近，不同主题远。</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="特征工程---提取pca" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---提取pca">特征工程 - 提取：PCA</h2>
<p><strong>PCA</strong>：</p>
<ul>
<li><strong>原理</strong>：线性变换转为不相关特征 (主成分)，按方差排序。</li>
<li><strong>步骤</strong>：
<ol type="1">
<li>算协方差矩阵。</li>
<li>算特征值和向量。</li>
<li>选最大k个特征值对应向量，构成变换矩阵。</li>
<li>原始数据乘变换矩阵，得降维数据。</li>
</ol></li>
<li><strong>优点</strong>：
<ul>
<li>降维，去冗余。</li>
<li>发现主要成分，提潜在结构。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>解释性差。</li>
<li>可能损失信息。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>高维降维。</li>
<li>可视化。</li>
<li>去噪。</li>
</ul></li>
</ul>
</section>
<section id="特征工程---提取ica" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---提取ica">特征工程 - 提取：ICA</h2>
<p><strong>ICA</strong>：</p>
<ul>
<li><strong>原理</strong>：假设数据由独立、非高斯成分混合，ICA找独立成分。</li>
<li><strong>与PCA区别</strong>：
<ul>
<li>PCA找不相关 (主成分)，ICA找独立。</li>
<li>PCA适用高斯分布，ICA适用非高斯。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>分离独立信号源。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>计算复杂。</li>
<li>对分布有假设。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>信号分离 (鸡尾酒会问题)。</li>
<li>图像处理。</li>
<li>脑电图分析。</li>
</ul></li>
</ul>
</section>
<section id="特征工程---提取lda" class="level2">
<h2 class="anchored" data-anchor-id="特征工程---提取lda">特征工程 - 提取：LDA</h2>
<p><strong>LDA</strong>：</p>
<ul>
<li><strong>原理</strong>：投影到低维，同类点近，异类点远。</li>
<li><strong>与PCA区别</strong>：
<ul>
<li>PCA无监督，LDA有监督。</li>
<li>PCA目标最大化方差，LDA目标最大化可分性。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>提分类性能。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>对分布有假设 (通常正态)。</li>
<li>可能过拟合。</li>
</ul></li>
<li><strong>适用</strong>：
<ul>
<li>分类。</li>
<li>降维。</li>
</ul></li>
</ul>
</section>
<section id="总结" class="level2">
<h2 class="anchored" data-anchor-id="总结">总结 📝</h2>
<p>数据预处理流程：</p>
<ol type="1">
<li><strong>了解数据</strong>：类型、特征、问题。</li>
<li><strong>质量评估</strong>：完整性、一致性、准确性、及时性。</li>
<li><strong>数据清洗</strong>：处理缺失值、噪声、不一致、异常。</li>
<li><strong>特征工程</strong>：提取有用特征，包括选择、构建、提取。</li>
</ol>
</section>
<section id="总结-续" class="level2">
<h2 class="anchored" data-anchor-id="总结-续">总结 (续)</h2>
<ul>
<li>学习了预处理概念和方法。</li>
<li>预处理是分析重要环节，提质量，改善性能。</li>
<li>包括质量评估、清洗和特征工程。</li>
</ul>
</section>
<section id="思考与讨论" class="level2">
<h2 class="anchored" data-anchor-id="思考与讨论">思考与讨论 🤔</h2>
<ul>
<li>你遇到过哪些质量问题？如何处理？</li>
<li>除本章方法，还知道哪些预处理方法？</li>
<li>预处理对分析和建模多重要？为什么？</li>
<li>如何评价预处理方案好坏？</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/qiufei\.github\.io\/web-slide-python-visual");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>🔋<a href="https://posit.co"><img src="https://posit.co/wp-content/themes/Posit/assets/images/posit-logo-2024.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 邱飞 © 2025
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://beian.miit.gov.cn">
<p>浙ICP备 2024072710号-1</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33021202002511">
<p>浙公网安备 33021202002511号</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:hfutqiufei@163.com">
      <i class="bi bi-envelope-at-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>